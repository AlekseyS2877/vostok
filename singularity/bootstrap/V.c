/* Generated by Vostok - Oberon-07 translator */

#include <stdlib.h>
#include <stddef.h>
#include <string.h>
#include <assert.h>
#include <math.h>
#include <stdbool.h>

#define O7C_BOOL_UNDEFINED
#include <o7c.h>

#include "V.h"

o7c_tag_t V_Message_tag;
extern void V_Message_undef(struct V_Message *r) {
}
o7c_tag_t V_Base_tag;
extern void V_Base_undef(struct V_Base *r) {
	V_Message_undef(&r->_);
	r->do_ = NULL;
}
o7c_tag_t V_Error_tag;
extern void V_Error_undef(struct V_Error *r) {
	V_Base_undef(&r->_);
}
o7c_tag_t V_MsgFinalize_tag;
extern void V_MsgFinalize_undef(struct V_MsgFinalize *r) {
	V_Base_undef(&r->_);
}
o7c_tag_t V_MsgNeedMemory_tag;
extern void V_MsgNeedMemory_undef(struct V_MsgNeedMemory *r) {
	V_Base_undef(&r->_);
}
o7c_tag_t V_MsgCopy_tag;
extern void V_MsgCopy_undef(struct V_MsgCopy *r) {
	V_Base_undef(&r->_);
	r->copy = NULL;
}
o7c_tag_t V_MsgLinks_tag;
extern void V_MsgLinks_undef(struct V_MsgLinks *r) {
	V_Base_undef(&r->_);
	r->diff = O7C_INT_UNDEF;
	r->count = O7C_INT_UNDEF;
}
o7c_tag_t V_MsgContentPass_tag;
extern void V_MsgContentPass_undef(struct V_MsgContentPass *r) {
	V_Base_undef(&r->_);
	r->id = O7C_INT_UNDEF;
}
o7c_tag_t V_MsgHash_tag;
extern void V_MsgHash_undef(struct V_MsgHash *r) {
	V_Base_undef(&r->_);
	r->hash = O7C_INT_UNDEF;
}

static o7c_bool Nothing(struct V_Message *this_, o7c_tag_t this__tag, struct V_Message *mes, o7c_tag_t mes_tag) {
	return false;
}

extern void V_Init(struct V_Base *base, o7c_tag_t base_tag) {
	(*base).do_ = Nothing;
}

extern void V_SetDo(struct V_Base *base, o7c_tag_t base_tag, V_Handle do_) {
	assert((*base).do_ == Nothing);
	(*base).do_ = do_;
}

extern o7c_bool V_Do(struct V_Base *handler, o7c_tag_t handler_tag, struct V_Message *message, o7c_tag_t message_tag) {
	return (*handler).do_(&(*handler)._, handler_tag, &(*message), message_tag);
}

extern void V_init(void) {
	static int initialized = 0;
	if (0 == initialized) {
		o7c_tag_init(V_Message_tag, NULL);
		o7c_tag_init(V_Base_tag, V_Message_tag);
		o7c_tag_init(V_Error_tag, V_Base_tag);
		o7c_tag_init(V_MsgFinalize_tag, V_Base_tag);
		o7c_tag_init(V_MsgNeedMemory_tag, V_Base_tag);
		o7c_tag_init(V_MsgCopy_tag, V_Base_tag);
		o7c_tag_init(V_MsgLinks_tag, V_Base_tag);
		o7c_tag_init(V_MsgContentPass_tag, V_Base_tag);
		o7c_tag_init(V_MsgHash_tag, V_Base_tag);

	}
	++initialized;
}

